Voici une version mise √† jour du doc, align√©e avec **Doc v14** et **l‚Äô√©tat r√©el du code** (un shell par module, KeenKonnect compris).

---

Voici un mod√®le central que tu peux r√©utiliser comme **r√©f√©rence de layout KeenKonnect** et donner tel quel √† une autre IA quand tu lui demandes de refactor des pages.

Je vais d‚Äôabord te donner **le composant central** (d√©j√† impl√©ment√©), puis **la structure de page de r√©f√©rence**, puis **les r√®gles pour corriger les autres pages**.

> üí° Important :
>
> * **NE PAS** recr√©er un deuxi√®me composant dans `components/keenkonnect/KeenPage.tsx`.
> * Le wrapper KeenKonnect existe d√©j√† sous forme de shell de module :
>   `app/keenkonnect/KeenPageShell.tsx` et c‚Äôest lui qu‚Äôil faut utiliser.

---

## 1. Composant central : `<KeenPage>` (d√©j√† impl√©ment√© comme shell KeenKonnect)

> Objectif : toutes les pages KeenKonnect passent par ce wrapper, pour aligner :
>
> * largeur
> * padding
> * taille du titre
> * zone de description
> * toolbar √† droite
> * pas de breadcrumb local (on laisse le layout global le g√©rer)

**Fichier r√©el** : `app/keenkonnect/KeenPageShell.tsx`
**Usage** : on importe son export par d√©faut sous le nom `KeenPage` dans les pages KeenKonnect.

```tsx
'use client';

import React from 'react';
import Head from 'next/head';
import usePageTitle from '@/hooks/usePageTitle';

type KeenPageProps = {
  /** Gros titre de la page, affich√© en <h1> */
  title: string;

  /** Sous-titre / description sous le titre */
  description?: string;

  /** Titre <title> du navigateur. Si non fourni, on g√©n√®re "KeenKonnect ¬∑ {title}" */
  metaTitle?: string;

  /** Contenu principal de la page */
  children: React.ReactNode;

  /**
   * √âl√©ment(s) √† droite du titre (boutons d‚Äôaction, filtres, etc.)
   * ex: <Button type="primary">New</Button>
   */
  toolbar?: React.ReactNode;

  /** Largeur max de la zone centrale */
  maxWidth?: number | string;
};

export default function KeenPage({
  title,
  description,
  metaTitle,
  children,
  toolbar,
  maxWidth = 1200,
}: KeenPageProps) {
  const finalMetaTitle = metaTitle ?? `KeenKonnect ¬∑ ${title}`;

  // Synchronise le titre de l‚Äôonglet (hook existant dans ton codebase)
  usePageTitle(finalMetaTitle);

  return (
    <>
      <Head>
        <title>{finalMetaTitle}</title>
      </Head>

      <div className="container mx-auto p-5" style={{ maxWidth }}>
        {/* Header de page standardis√© */}
        <div className="mb-4 flex flex-wrap items-center justify-between gap-3">
          <div>
            <h1 className="text-2xl font-bold">{title}</h1>
            {description && (
              <p className="mt-1 text-gray-500">{description}</p>
            )}
          </div>

          {toolbar && <div className="flex items-center gap-2">{toolbar}</div>}
        </div>

        {/* Contenu sp√©cifique √† la page */}
        {children}
      </div>
    </>
  );
}
```

**R√®gles associ√©es :**

* ‚úÖ **Toujours** utiliser ce `KeenPage` (import√© depuis `app/keenkonnect/KeenPageShell`) pour les pages KeenKonnect (sauf cas ultra-sp√©ciaux).
* ‚úÖ Titre **toujours** en `text-2xl font-bold`, pas de `Typography.Title level={1}` ou `level={2}` diff√©rents selon les pages.
* ‚úÖ Padding global **toujours** `className="container mx-auto p-5"`.
* ‚úÖ Toolbar (boutons √† droite du titre) passe par la prop `toolbar`.
* üö´ **Pas** de breadcrumb local dans les pages (le layout global s‚Äôen charge).
* üö´ **Pas** de `margin-top` √©norme ou de `padding` custom sur le container : tout doit se faire √† l‚Äôint√©rieur du contenu via des `Card`, `Row`, etc.

> üîé Contexte Doc v14 :
> KeenKonnect a son shell de module (`KeenPageShell`), comme Ekoh (`EkohPageShell`), Ethikos (`EthikosPageShell`), Konnected, Kreative, etc.
> Ce doc d√©crit **le shell KeenKonnect** d√©j√† pr√©sent, il ne faut pas cr√©er un second wrapper parall√®le.

---

## 2. Page de r√©f√©rence (mod√®le √† recopier)

Ta page `search-filter-documents` est globalement le bon ¬´ look ¬ª.
Voici la version **r√©f√©renc√©e** qui l‚Äôutilise via `KeenPage` venant du shell existant :

```tsx
'use client';

import React from 'react';
import { Card, Alert } from 'antd';
import type { PaginationProps } from 'antd';
import {
  ProTable,
  QueryFilter,
  ProFormText,
  ProFormSelect,
  ProFormDateRangePicker,
} from '@ant-design/pro-components';
import KeenPage from '@/app/keenkonnect/KeenPageShell';

// ... types + donn√©es (DocumentResource, sampleDocuments, etc.)

export default function SearchFilterDocumentsPage(): JSX.Element {
  // ... state, filtres, useMemo, columns, paginationProps, etc.

  return (
    <KeenPage
      title="Search & Filter Documents"
      description="Advanced search and filtering for knowledge documents in KeenKonnect."
    >
      {/* Bloc filtres */}
      <Card className="mb-4">
        <QueryFilter
          onFinish={handleFilterFinish}
          onReset={handleFilterReset}
          labelWidth="auto"
          defaultCollapsed={false}
          span={8}
          initialValues={{ sort: DEFAULT_SORT }}
        >
          {/* ... champs de filtre */}
        </QueryFilter>
      </Card>

      {/* R√©sum√© + table */}
      <Alert /* ...props */ className="mb-4" />

      <Card>
        <ProTable
          /* ...props */
        />
        {/* Pagination externe */}
      </Card>
    </KeenPage>
  );
}
```

üëâ **C‚Äôest cette structure qu‚Äôil faut viser partout** :
`<KeenPage>` en haut, puis `Card`, `ProTable`, `StepsForm`, `Tabs`, etc. √† l‚Äôint√©rieur.

---

## 3. Que corriger, et o√π ? (central vs par page)

### 3.1. Ce qui se corrige **de mani√®re centrale**

En imposant ce shell KeenKonnect (`KeenPage` depuis `KeenPageShell`), tu centralises :

1. **Taille & style du titre**

   * `h1.text-2xl.font-bold` partout.
   * Plus de `Typography.Title` avec des niveaux diff√©rents.

2. **Padding & largeur**

   * Tout le monde utilise `container mx-auto p-5` avec le m√™me `maxWidth`.
   * Plus de pages full-bleed sans padding.

3. **Structure de base**

   * Header de page = m√™me layout : titre + description + toolbar √† droite.
   * Plus de pages o√π un bouton important flotte dans un coin sans alignement.

4. **Fil d‚ÄôAriane (breadcrumb)**

   * **Jamais** en local dans la page.
   * Si un jour on veut ajouter un breadcrumb global, on le fait dans le layout `app/keenkonnect/layout.tsx` uniquement.

R√©sultat : 80% des diff√©rences visuelles disparaissent juste en passant par ce shell.

---

### 3.2. Ce qui doit √™tre fait **par page** (m√©canique mais simple)

Pour chaque page existante (exemples : `my-projects`, `create-new-project`, `document-management`, `track-project-impact`, etc.) :

#### 1. Remplacer le wrapper racine

**Avant (exemples actuels) :**

```tsx
<div style={{ maxWidth: 960, margin: '0 auto', padding: 24 }}>
  {/* ... */}
</div>
```

ou

```tsx
<div className="container mx-auto p-5">
  <h1 className="text-3xl font-semibold">Big Title</h1>
  {/* ... */}
</div>
```

ou

```tsx
<PageContainer
  header={{
    title: 'My Page',
    breadcrumb: { /* ... */ },
  }}
>
  {/* ... */}
</PageContainer>
```

**Apr√®s (mod√®le unique, bas√© sur le shell existant) :**

```tsx
import KeenPage from '@/app/keenkonnect/KeenPageShell';

export default function SomePage() {
  return (
    <KeenPage
      title="My Page"
      description="One-line description of what this page does."
      toolbar={(
        /* optionnel : boutons d‚Äôaction √† droite du titre */
      )}
    >
      {/* Ancien contenu, sans h1, sans Head, sans breadcrumb */}
    </KeenPage>
  );
}
```

> üîÅ **Important** :
>
> * Supprimer le `h1` local, `Typography.Title` principal, et les gros marges hautes ‚Äî c‚Äôest g√©r√© par `KeenPage`.
> * Si la page utilisait `PageContainer`, garder le contenu mais le mettre dans des `Card` ou `ProCard` √† l‚Äôint√©rieur de `<KeenPage>`.

#### 2. Supprimer les breadcrumbs locaux

Tout ce qui ressemble √† :

```tsx
<Breadcrumb /* ... */ />
```

ou

```tsx
<PageContainer
  header={{
    breadcrumb: { /* ... */ },
  }}
/>
```

‚û°Ô∏è **√Ä supprimer**.
Breadcrumb = only via layout global (la ‚Äúupper bar‚Äù).

#### 3. Unifier les titres secondaires

√Ä l‚Äôint√©rieur des pages, pour les sous-sections, tu peux :

* soit utiliser `Card` avec `title="..."`,
* soit `h2` / `h3` tailwind (`text-lg font-semibold`, etc.) mais de fa√ßon coh√©rente :

Par ex :

```tsx
<h2 className="text-lg font-semibold mb-2">Team Settings</h2>
```

ou

```tsx
<Card title="Team Settings" className="mb-4">
  {/* ... */}
</Card>
```

---

## 4. Quels types de pages & comment les aligner

Tu peux inclure ce bloc dans ta doc pour guider l‚ÄôIA selon le type de page.

### 4.1. Pages ‚Äúform wizard‚Äù (StepsForm)

Ex : `create-new-project`, `submit-impact-reports`, `match-preferences`, etc.

**Pattern recommand√© :**

```tsx
<KeenPage
  title="Create New Project"
  description="Use this guided wizard to describe your project and configure the team."
>
  <Card>
    <StepsForm
      onFinish={...}
      formProps={{ layout: 'vertical' }}
      submitter={{
        // pas de nextText/prevText custom si le type ne le supporte pas
      }}
    >
      {/* StepForm ... */}
    </StepsForm>
  </Card>
</KeenPage>
```

**Checklist :**

* Pas de marge/padding custom autour du `Card`.
* StepForm toujours dans un `Card` (ou deux si besoin).
* Titre principal g√©r√© par `KeenPage`.

---

### 4.2. Pages ‚Äútableau & filtres‚Äù (list, ProTable)

Ex :
`knowledge/search-filter-documents` (r√©f√©rence), `projects/my-projects`, `workspaces/my-workspaces`, `knowledge/document-management`.

**Pattern recommand√© :**

```tsx
<KeenPage
  title="My Projects"
  description="Browse and manage your KeenKonnect projects."
  toolbar={(
    <Button type="primary">New project</Button>
  )}
>
  <Card className="mb-4">
    {/* Filtres / QueryFilter / search bar */}
  </Card>

  <Card>
    <ProTable /* ... */ />
  </Card>
</KeenPage>
```

---

### 4.3. Pages ‚Äúdashboard / analytics‚Äù

Ex :
`sustainability-impact/sustainability-dashboard`, `track-project-impact`.

M√™me base, mais tu joues avec `Row`/`Col` + `Card`/`ProCard` :

```tsx
<KeenPage
  title="Sustainability Impact Dashboard"
  description="High-level dashboard aggregating sustainability impact across projects."
>
  <Row gutter={[16, 16]}>
    <Col xs={24} md={12}>
      <Card title="CO‚ÇÇ saved">
        {/* Graph / KPI */}
      </Card>
    </Col>
    {/* ... */}
  </Row>
</KeenPage>
```

---

## 5. R√©ponse directe √† tes questions (version √† jour)

> **‚Äúwhat fix is needed for each page? is this a central fix, or a fix per page?‚Äù**

* **Central** :

  * Utiliser le shell existant `KeenPage` (depuis `app/keenkonnect/KeenPageShell.tsx`) comme **obligatoire** pour toutes les pages KeenKonnect.
  * Imposer les r√®gles :

    * `container mx-auto p-5`
    * `h1.text-2xl.font-bold`
    * description en `text-gray-500`
    * toolbar √† droite via prop
    * **aucun breadcrumb local**.

* **Par page (mais m√©canique)** :

  * Remplacer le wrapper racine par `<KeenPage>` (depuis `KeenPageShell`).
  * Supprimer les `h1` / `Title` custom.
  * Supprimer les breadcrumbs locaux.
  * Remettre les contenus dans des `Card` / `Row` / `Col` avec marges coh√©rentes (`mb-4`, etc.).
  * Pour les pages qui utilisaient `PageContainer`, migrer le header dans les props de `<KeenPage>`.

> **‚Äúwhich page are ok (like search-filter-documents)‚Äù**

* ‚úÖ `knowledge/search-filter-documents`
  ‚Üí d√©j√† tr√®s proche du mod√®le. Il suffit juste de s‚Äôassurer qu‚Äôelle passe par `KeenPage` depuis `KeenPageShell`, mais visuellement tu es d√©j√† dans le bon style.

* ‚ö†Ô∏è Les autres pages (projects, workspaces, sustainability, etc.)
  ‚Üí doivent √™tre **align√©es** sur ce mod√®le en les enveloppant dans `KeenPage` (shell), et en supprimant :

  * leurs wrappers custom (`div` avec padding/margin),
  * leurs gros `Title` Ant Design,
  * leurs breadcrumbs locaux,
  * leurs variations de padding.

---

### TL;DR √† copier dans ton repo / Notion (version corrig√©e)

* Ne **pas** cr√©er `components/keenkonnect/KeenPage.tsx`.
* Utiliser le shell existant : `app/keenkonnect/KeenPageShell.tsx` qui exporte `KeenPage`.
* Toute nouvelle page KeenKonnect = **obligatoirement** bas√©e sur ce `KeenPage`.
* Toute page existante = refactor pour utiliser `KeenPage` (shell) et supprimer les layouts locaux.
