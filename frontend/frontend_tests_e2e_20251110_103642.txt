===== TOC (62 fichiers) =====
1. C:\MyCode\Konnaxionv14\frontend\_e2e\example.spec.ts
2. C:\MyCode\Konnaxionv14\frontend\playwright-smokeREADME.txt
3. C:\MyCode\Konnaxionv14\frontend\tests\app\ekoh\achievements-badges\earned-badges-display\page.test.tsx
4. C:\MyCode\Konnaxionv14\frontend\tests\app\ekoh\dashboard\page.test.tsx
5. C:\MyCode\Konnaxionv14\frontend\tests\app\ekoh\expertise-areas\view-current-expertise\page.test.tsx
6. C:\MyCode\Konnaxionv14\frontend\tests\app\ekoh\overview-analytics\current-ekoh-score\page.test.tsx
7. C:\MyCode\Konnaxionv14\frontend\tests\app\ekoh\voting-influence\current-voting-weight\page.test.tsx
8. C:\MyCode\Konnaxionv14\frontend\tests\app\keenkonnect\ai-team-matching\find-teams\page.test.tsx
9. C:\MyCode\Konnaxionv14\frontend\tests\app\keenkonnect\ai-team-matching\match-preferences\page.test.tsx
10. C:\MyCode\Konnaxionv14\frontend\tests\app\keenkonnect\ai-team-matching\my-matches\page.test.tsx
11. C:\MyCode\Konnaxionv14\frontend\tests\app\keenkonnect\dashboard\page.test.tsx
12. C:\MyCode\Konnaxionv14\frontend\tests\app\keenkonnect\knowledge\browse-repository\page.test.tsx
13. C:\MyCode\Konnaxionv14\frontend\tests\app\keenkonnect\knowledge\document-management\page.test.tsx
14. C:\MyCode\Konnaxionv14\frontend\tests\app\keenkonnect\knowledge\search-filter-documents\page.test.tsx
15. C:\MyCode\Konnaxionv14\frontend\tests\app\keenkonnect\knowledge\upload-new-document\page.test.tsx
16. C:\MyCode\Konnaxionv14\frontend\tests\app\keenkonnect\projects\browse-projects\page.test.tsx
17. C:\MyCode\Konnaxionv14\frontend\tests\app\keenkonnect\projects\create-new-project\page.test.tsx
18. C:\MyCode\Konnaxionv14\frontend\tests\app\keenkonnect\projects\my-projects\page.test.tsx
19. C:\MyCode\Konnaxionv14\frontend\tests\app\keenkonnect\projects\project-workspace\page.test.tsx
20. C:\MyCode\Konnaxionv14\frontend\tests\app\keenkonnect\sustainability-impact\submit-impact-reports\page.test.tsx
21. C:\MyCode\Konnaxionv14\frontend\tests\app\keenkonnect\sustainability-impact\sustainability-dashboard\page.test.tsx
22. C:\MyCode\Konnaxionv14\frontend\tests\app\keenkonnect\sustainability-impact\track-project-impact\page.test.tsx
23. C:\MyCode\Konnaxionv14\frontend\tests\app\keenkonnect\user-reputation\account-preferences\page.test.tsx
24. C:\MyCode\Konnaxionv14\frontend\tests\app\keenkonnect\user-reputation\manage-expertise-areas\page.test.tsx
25. C:\MyCode\Konnaxionv14\frontend\tests\app\keenkonnect\user-reputation\view-reputation-ekoh\page.test.tsx
26. C:\MyCode\Konnaxionv14\frontend\tests\app\keenkonnect\workspaces\browse-available-workspaces\page.test.tsx
27. C:\MyCode\Konnaxionv14\frontend\tests\app\keenkonnect\workspaces\launch-new-workspace\page.test.tsx
28. C:\MyCode\Konnaxionv14\frontend\tests\app\keenkonnect\workspaces\my-workspaces\page.test.tsx
29. C:\MyCode\Konnaxionv14\frontend\tests\app\konnected\certifications\certification-programs\page.test.tsx
30. C:\MyCode\Konnaxionv14\frontend\tests\app\konnected\certifications\exam-dashboard-results\page.test.tsx
31. C:\MyCode\Konnaxionv14\frontend\tests\app\konnected\certifications\exam-preparation\page.test.tsx
32. C:\MyCode\Konnaxionv14\frontend\tests\app\konnected\certifications\exam-registration\page.test.tsx
33. C:\MyCode\Konnaxionv14\frontend\tests\app\konnected\community-discussions\active-threads\page.test.tsx
34. C:\MyCode\Konnaxionv14\frontend\tests\app\konnected\community-discussions\moderation\page.test.tsx
35. C:\MyCode\Konnaxionv14\frontend\tests\app\konnected\community-discussions\start-new-discussion\page.test.tsx
36. C:\MyCode\Konnaxionv14\frontend\tests\app\konnected\dashboard\page.test.tsx
37. C:\MyCode\Konnaxionv14\frontend\tests\app\konnected\learning-library\browse-resources\page.test.tsx
38. C:\MyCode\Konnaxionv14\frontend\tests\app\konnected\learning-library\offline-content\page.test.tsx
39. C:\MyCode\Konnaxionv14\frontend\tests\app\konnected\learning-library\recommended-resources\page.test.tsx
40. C:\MyCode\Konnaxionv14\frontend\tests\app\konnected\learning-library\search-filters\page.test.tsx
41. C:\MyCode\Konnaxionv14\frontend\tests\app\konnected\learning-paths\create-learning-path\page.test.tsx
42. C:\MyCode\Konnaxionv14\frontend\tests\app\konnected\learning-paths\manage-existing-paths\page.test.tsx
43. C:\MyCode\Konnaxionv14\frontend\tests\app\konnected\learning-paths\my-learning-path\page.test.tsx
44. C:\MyCode\Konnaxionv14\frontend\tests\app\konnected\teams-collaboration\activity-planner\page.test.tsx
45. C:\MyCode\Konnaxionv14\frontend\tests\app\konnected\teams-collaboration\my-teams\page.test.tsx
46. C:\MyCode\Konnaxionv14\frontend\tests\app\konnected\teams-collaboration\project-workspaces\page.test.tsx
47. C:\MyCode\Konnaxionv14\frontend\tests\app\konnected\teams-collaboration\team-builder\page.test.tsx
48. C:\MyCode\Konnaxionv14\frontend\tests\app\kreative\collaborative-spaces\find-spaces\page.test.tsx
49. C:\MyCode\Konnaxionv14\frontend\tests\app\kreative\collaborative-spaces\my-spaces\page.test.tsx
50. C:\MyCode\Konnaxionv14\frontend\tests\app\kreative\collaborative-spaces\start-new-space\page.test.tsx
51. C:\MyCode\Konnaxionv14\frontend\tests\app\kreative\community-showcases\featured-projects\page.test.tsx
52. C:\MyCode\Konnaxionv14\frontend\tests\app\kreative\community-showcases\submit-to-showcase\page.test.tsx
53. C:\MyCode\Konnaxionv14\frontend\tests\app\kreative\community-showcases\top-creators\page.test.tsx
54. C:\MyCode\Konnaxionv14\frontend\tests\app\kreative\creative-hub\explore-ideas\page.test.tsx
55. C:\MyCode\Konnaxionv14\frontend\tests\app\kreative\creative-hub\inspiration-gallery\page.test.tsx
56. C:\MyCode\Konnaxionv14\frontend\tests\app\kreative\creative-hub\submit-creative-work\page.test.tsx
57. C:\MyCode\Konnaxionv14\frontend\tests\app\kreative\dashboard\page.test.tsx
58. C:\MyCode\Konnaxionv14\frontend\tests\app\kreative\idea-incubator\collaborate-on-ideas\page.test.tsx
59. C:\MyCode\Konnaxionv14\frontend\tests\app\kreative\idea-incubator\create-new-idea\page.test.tsx
60. C:\MyCode\Konnaxionv14\frontend\tests\app\kreative\idea-incubator\my-ideas\page.test.tsx
61. C:\MyCode\Konnaxionv14\frontend\tests\routes-tests.spec.ts
62. C:\MyCode\Konnaxionv14\frontend\tests\routes.spec.ts
===== END TOC =====


===== BEGIN _e2e/example.spec.ts =====
import { expect, test } from "@playwright/test"

test("has title", async ({ page }) => {
  await page.goto("./")

  await expect(page).toHaveTitle(/Next.js Enterprise Boilerplate/)
})

===== END _e2e/example.spec.ts =====


===== BEGIN playwright-smokeREADME.txt =====
Voici le **kit complet** pour maîtriser le smoke test. Clair. Exhaustif. Prêt à copier.

# 1) Principe

* On génère une **liste de routes** depuis `app/**/page.tsx`.
* On **sert** l’app (dev ou prod).
* Playwright **visite** chaque route, **loggue** HTTP, erreurs console, et **screenshot** si problème.
* Deux modes:

  * **Audit**: n’échoue jamais. Écrit des logs.
  * **Bloquant**: échoue si HTTP ≠ 2xx ou erreurs console (CI/CD).

# 2) Fichiers et structure

## 2.1 Config Playwright

`playwright.smoke.config.ts`

```ts
import { defineConfig } from '@playwright/test'

export default defineConfig({
  testDir: 'tests',
  testMatch: ['routes.spec.ts'],      // pages réelles uniquement
  testIgnore: ['**/_e2e/**','_e2e/**','**/e2e/**','e2e/**'],
  reporter: 'list',
  workers: 1,
  timeout: 90_000,
  expect: { timeout: 10_000 },
  projects: [{ name: 'chromium', use: { browserName: 'chromium' } }],
})
```

## 2.2 Génération des routes

`scripts/find-routes.mjs`

```js
import { promises as fs } from 'fs'
import { join, relative } from 'path'

const APP = join(process.cwd(), 'app')
const isGroup = s => /^\(.*\)$/.test(s)
const isDyn   = s => /\[.+\]/.test(s)
const isTest  = s => s === 'index.test' || s.endsWith('.test')

async function walk(dir, acc = []) {
  const ents = await fs.readdir(dir, { withFileTypes: true })
  for (const e of ents) {
    const p = join(dir, e.name)
    if (e.isDirectory()) await walk(p, acc)
    if (e.isFile() && e.name === 'page.tsx') acc.push(p)
  }
  return acc
}

const files = await walk(APP)
const urls = Array.from(new Set(files
  .map(f => {
    const rel = relative(APP, f).replace(/\\/g, '/')
    return rel === 'page.tsx' ? '/' : '/' + rel.replace(/\/page\.tsx$/, '')
  })
  .filter(u => !u.includes('/api/'))
  .filter(u => !u.split('/').some(isGroup))
  .filter(u => !u.split('/').some(isDyn))
  .filter(u => !u.split('/').some(isTest))
)).sort()

await fs.writeFile('routes.json', JSON.stringify(urls, null, 2))
console.log(`found ${urls.length} routes`)
```

## 2.3 Test smoke des pages réelles

`tests/routes.spec.ts`

```ts
import { test, expect } from '@playwright/test'
import fs from 'fs'
import path from 'path'

const routes: string[] = JSON.parse(fs.readFileSync('routes.json', 'utf8'))
const GATE   = process.env.SMOKE_GATE === '1'
const NAV_TMO = Number(process.env.NAV_TMO ?? 45_000)
const outDir = 'playwright-report'
const toSafe = (s: string) => s.replace(/[^a-z0-9-_]+/gi, '_')

test.describe('Smoke all pages', () => {
  for (const p of routes) {
    test(`GET ${p}`, async ({ page }) => {
      page.setDefaultTimeout(NAV_TMO)
      page.setDefaultNavigationTimeout(NAV_TMO)

      const logs: {type:string;text:string}[] = []
      page.on('console', m => logs.push({ type: m.type(), text: m.text() }))
      page.on('pageerror', e => logs.push({ type: 'pageerror', text: String(e) }))

      let resp: any = null, navErr: string | null = null
      try {
        resp = await page.goto(`http://localhost:3000${p}`, { waitUntil: 'domcontentloaded', timeout: NAV_TMO })
      } catch (e: any) { navErr = String(e?.message ?? e) }

      const status = resp?.status()
      const ok = !!resp?.ok()
      const severe = logs.filter(l =>
        ['error','assert','pageerror'].includes(l.type) && !/favicon\.ico/i.test(l.text)
      )

      fs.mkdirSync(outDir, { recursive: true })
      if (navErr || !ok || severe.length) {
        const base = toSafe(p)
        try { await page.screenshot({ path: path.join(outDir, `smoke_${base}.png`), fullPage: true }) } catch {}
      }
      fs.appendFileSync(path.join(outDir, 'smoke.ndjson'),
        JSON.stringify({ path: p, status, ok, navErr, severe }) + '\n'
      )

      if (GATE) {
        expect(ok, `HTTP ${status} on ${p}`).toBeTruthy()
        expect(severe, `client errors on ${p}`).toHaveLength(0)
      }
    })
  }
})
```

# 3) Scripts package.json

```json
{
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",

    "routes:gen": "node scripts/find-routes.mjs",

    "smoke:dev": "playwright test -c playwright.smoke.config.ts",
    "smoke:gate": "cross-env SMOKE_GATE=1 playwright test -c playwright.smoke.config.ts",
    "pw:install": "playwright install",
    "postinstall": "playwright install"
  },
  "devDependencies": {
    "@playwright/test": "1.56.1"
  }
}
```

# 4) Exécution standard

## 4.1 Générer les routes

```powershell
node .\scripts\find-routes.mjs
type .\routes.json
```

## 4.2 Lancer l’app

**Prod recommandé** pour stabilité:

```powershell
pnpm build
pnpm start
```

(ou dev: `pnpm dev`)

## 4.3 Lancer les tests

* **Audit (non-bloquant)**:

```powershell
pnpm smoke:dev
```

* **Bloquant (CI)**:

```powershell
$env:SMOKE_GATE="1"
pnpm smoke:dev
```

# 5) Résultats et analyse

## 5.1 Emplacement des artefacts

* Logs NDJSON: `playwright-report/smoke.ndjson`
* Screenshots: `playwright-report/smoke_*.png`

## 5.2 Filtres rapides

```powershell
Select-String -Path .\playwright-report\smoke.ndjson -Pattern '"ok":false|"navErr"|Module not found|Build Error'
```

## 5.3 Lecture NDJSON (exemple)

```json
{"path":"/keenkonnect/dashboard","status":500,"ok":false,"navErr":null,"severe":[{"type":"pageerror","text":"Module not found: Can't resolve 'recharts'"}]}
```

Interprétation:

* `status` ≠ 200 → problème serveur/rendu.
* `navErr` non vide → timeout/navigation interrompue.
* `severe[]` → erreurs console collectées.

# 6) Bonnes pratiques

* **Toujours** lancer les tests avec le serveur **déjà démarré**.
* Préférer **prod** (`build/start`) pour éviter les faux timeouts liés à HMR.
* Exclure les **pages tests** du build et du smoke principal:

  * Renommer `app/**/index.test/page.tsx` → `page.test.tsx` **ou**
  * `playwright.smoke.config.ts` avec `testMatch: ['routes.spec.ts']`.
* **Dependencies manquantes**: installer avant le run (`recharts`, `@ant-design/plots`, etc.).
* **Client Components**: si une page utilise `recharts`, `@ant-design/plots`, `next/navigation`, hooks client → ajouter `'use client'`.

# 7) Troubleshooting

| Symptôme                       | Cause                                   | Action                                                                    |
| ------------------------------ | --------------------------------------- | ------------------------------------------------------------------------- |
| `No tests found`               | Mauvais `testMatch` ou fichier manquant | Vérifier `tests/routes.spec.ts` et `playwright.smoke.config.ts`           |
| `did not expect test()`        | Versions Playwright différentes         | Utiliser `pnpm exec playwright ...` et fixer `@playwright/test` en devDep |
| Timeouts fréquents             | HMR en dev                              | Tester en prod et réduire `waitUntil` à `domcontentloaded`                |
| Beaucoup de `Module not found` | Paquets non installés                   | `pnpm add …` puis relancer                                                |
| `Functions cannot be passed…`  | UI AntD dans Server Component           | Ajouter `'use client'` ou wrapper client                                  |
| Build bloqué par ESLint        | Règles strictes                         | Temporaire: `eslint.ignoreDuringBuilds:true`, `.eslintignore` pour tests  |

# 8) Mode “scan étendu” (optionnel)

* Générer routes de test: `find-routes-tests.mjs`.
* Test dédié qui **collecte** sans échouer, écrit HTML/PNG: `tests/routes-tests.spec.ts`.
* À utiliser quand tu veux inventorier les `index.test` encore présents, **pas** pour le build.

# 9) Variables utiles

* `SMOKE_GATE=1`: active les `expect(...)` → **bloquant**.
* `NAV_TMO=60000`: override timeout de navigation.

# 10) Séquence type (prod, non-bloquant)

```powershell
node scripts/find-routes.mjs
pnpm build
pnpm start
pnpm smoke:dev
```

# 11) Séquence CI (bloquant)

```bash
node scripts/find-routes.mjs
pnpm build
pnpm start &                    # ou via un job/service
SMOKE_GATE=1 pnpm smoke:dev
```

Ce kit te donne 100% du contrôle: génération des routes, exécution, logs, artefacts, et intégration CI.

===== END playwright-smokeREADME.txt =====


===== BEGIN tests/app/ekoh/achievements-badges/earned-badges-display/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/ekoh/achievements-badges/earned-badges-display/page.test.tsx =====


===== BEGIN tests/app/ekoh/dashboard/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/ekoh/dashboard/page.test.tsx =====


===== BEGIN tests/app/ekoh/expertise-areas/view-current-expertise/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/ekoh/expertise-areas/view-current-expertise/page.test.tsx =====


===== BEGIN tests/app/ekoh/overview-analytics/current-ekoh-score/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/ekoh/overview-analytics/current-ekoh-score/page.test.tsx =====


===== BEGIN tests/app/ekoh/voting-influence/current-voting-weight/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/ekoh/voting-influence/current-voting-weight/page.test.tsx =====


===== BEGIN tests/app/keenkonnect/ai-team-matching/find-teams/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/keenkonnect/ai-team-matching/find-teams/page.test.tsx =====


===== BEGIN tests/app/keenkonnect/ai-team-matching/match-preferences/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/keenkonnect/ai-team-matching/match-preferences/page.test.tsx =====


===== BEGIN tests/app/keenkonnect/ai-team-matching/my-matches/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/keenkonnect/ai-team-matching/my-matches/page.test.tsx =====


===== BEGIN tests/app/keenkonnect/dashboard/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/keenkonnect/dashboard/page.test.tsx =====


===== BEGIN tests/app/keenkonnect/knowledge/browse-repository/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/keenkonnect/knowledge/browse-repository/page.test.tsx =====


===== BEGIN tests/app/keenkonnect/knowledge/document-management/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/keenkonnect/knowledge/document-management/page.test.tsx =====


===== BEGIN tests/app/keenkonnect/knowledge/search-filter-documents/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/keenkonnect/knowledge/search-filter-documents/page.test.tsx =====


===== BEGIN tests/app/keenkonnect/knowledge/upload-new-document/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/keenkonnect/knowledge/upload-new-document/page.test.tsx =====


===== BEGIN tests/app/keenkonnect/projects/browse-projects/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/keenkonnect/projects/browse-projects/page.test.tsx =====


===== BEGIN tests/app/keenkonnect/projects/create-new-project/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/keenkonnect/projects/create-new-project/page.test.tsx =====


===== BEGIN tests/app/keenkonnect/projects/my-projects/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/keenkonnect/projects/my-projects/page.test.tsx =====


===== BEGIN tests/app/keenkonnect/projects/project-workspace/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/keenkonnect/projects/project-workspace/page.test.tsx =====


===== BEGIN tests/app/keenkonnect/sustainability-impact/submit-impact-reports/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/keenkonnect/sustainability-impact/submit-impact-reports/page.test.tsx =====


===== BEGIN tests/app/keenkonnect/sustainability-impact/sustainability-dashboard/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/keenkonnect/sustainability-impact/sustainability-dashboard/page.test.tsx =====


===== BEGIN tests/app/keenkonnect/sustainability-impact/track-project-impact/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/keenkonnect/sustainability-impact/track-project-impact/page.test.tsx =====


===== BEGIN tests/app/keenkonnect/user-reputation/account-preferences/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/keenkonnect/user-reputation/account-preferences/page.test.tsx =====


===== BEGIN tests/app/keenkonnect/user-reputation/manage-expertise-areas/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/keenkonnect/user-reputation/manage-expertise-areas/page.test.tsx =====


===== BEGIN tests/app/keenkonnect/user-reputation/view-reputation-ekoh/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/keenkonnect/user-reputation/view-reputation-ekoh/page.test.tsx =====


===== BEGIN tests/app/keenkonnect/workspaces/browse-available-workspaces/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/keenkonnect/workspaces/browse-available-workspaces/page.test.tsx =====


===== BEGIN tests/app/keenkonnect/workspaces/launch-new-workspace/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/keenkonnect/workspaces/launch-new-workspace/page.test.tsx =====


===== BEGIN tests/app/keenkonnect/workspaces/my-workspaces/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/keenkonnect/workspaces/my-workspaces/page.test.tsx =====


===== BEGIN tests/app/konnected/certifications/certification-programs/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/konnected/certifications/certification-programs/page.test.tsx =====


===== BEGIN tests/app/konnected/certifications/exam-dashboard-results/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/konnected/certifications/exam-dashboard-results/page.test.tsx =====


===== BEGIN tests/app/konnected/certifications/exam-preparation/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/konnected/certifications/exam-preparation/page.test.tsx =====


===== BEGIN tests/app/konnected/certifications/exam-registration/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/konnected/certifications/exam-registration/page.test.tsx =====


===== BEGIN tests/app/konnected/community-discussions/active-threads/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/konnected/community-discussions/active-threads/page.test.tsx =====


===== BEGIN tests/app/konnected/community-discussions/moderation/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/konnected/community-discussions/moderation/page.test.tsx =====


===== BEGIN tests/app/konnected/community-discussions/start-new-discussion/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/konnected/community-discussions/start-new-discussion/page.test.tsx =====


===== BEGIN tests/app/konnected/dashboard/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/konnected/dashboard/page.test.tsx =====


===== BEGIN tests/app/konnected/learning-library/browse-resources/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/konnected/learning-library/browse-resources/page.test.tsx =====


===== BEGIN tests/app/konnected/learning-library/offline-content/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/konnected/learning-library/offline-content/page.test.tsx =====


===== BEGIN tests/app/konnected/learning-library/recommended-resources/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/konnected/learning-library/recommended-resources/page.test.tsx =====


===== BEGIN tests/app/konnected/learning-library/search-filters/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/konnected/learning-library/search-filters/page.test.tsx =====


===== BEGIN tests/app/konnected/learning-paths/create-learning-path/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/konnected/learning-paths/create-learning-path/page.test.tsx =====


===== BEGIN tests/app/konnected/learning-paths/manage-existing-paths/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/konnected/learning-paths/manage-existing-paths/page.test.tsx =====


===== BEGIN tests/app/konnected/learning-paths/my-learning-path/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/konnected/learning-paths/my-learning-path/page.test.tsx =====


===== BEGIN tests/app/konnected/teams-collaboration/activity-planner/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/konnected/teams-collaboration/activity-planner/page.test.tsx =====


===== BEGIN tests/app/konnected/teams-collaboration/my-teams/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/konnected/teams-collaboration/my-teams/page.test.tsx =====


===== BEGIN tests/app/konnected/teams-collaboration/project-workspaces/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/konnected/teams-collaboration/project-workspaces/page.test.tsx =====


===== BEGIN tests/app/konnected/teams-collaboration/team-builder/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/konnected/teams-collaboration/team-builder/page.test.tsx =====


===== BEGIN tests/app/kreative/collaborative-spaces/find-spaces/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/kreative/collaborative-spaces/find-spaces/page.test.tsx =====


===== BEGIN tests/app/kreative/collaborative-spaces/my-spaces/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/kreative/collaborative-spaces/my-spaces/page.test.tsx =====


===== BEGIN tests/app/kreative/collaborative-spaces/start-new-space/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/kreative/collaborative-spaces/start-new-space/page.test.tsx =====


===== BEGIN tests/app/kreative/community-showcases/featured-projects/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/kreative/community-showcases/featured-projects/page.test.tsx =====


===== BEGIN tests/app/kreative/community-showcases/submit-to-showcase/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/kreative/community-showcases/submit-to-showcase/page.test.tsx =====


===== BEGIN tests/app/kreative/community-showcases/top-creators/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/kreative/community-showcases/top-creators/page.test.tsx =====


===== BEGIN tests/app/kreative/creative-hub/explore-ideas/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/kreative/creative-hub/explore-ideas/page.test.tsx =====


===== BEGIN tests/app/kreative/creative-hub/inspiration-gallery/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/kreative/creative-hub/inspiration-gallery/page.test.tsx =====


===== BEGIN tests/app/kreative/creative-hub/submit-creative-work/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/kreative/creative-hub/submit-creative-work/page.test.tsx =====


===== BEGIN tests/app/kreative/dashboard/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/kreative/dashboard/page.test.tsx =====


===== BEGIN tests/app/kreative/idea-incubator/collaborate-on-ideas/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/kreative/idea-incubator/collaborate-on-ideas/page.test.tsx =====


===== BEGIN tests/app/kreative/idea-incubator/create-new-idea/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/kreative/idea-incubator/create-new-idea/page.test.tsx =====


===== BEGIN tests/app/kreative/idea-incubator/my-ideas/page.test.tsx =====
// pages/pageTemplate/index.test.tsx
import React from 'react';
import { render, screen } from '@testing-library/react';
import PageTemplate from './index';

describe('PageTemplate', () => {
  it('devrait afficher le titre générique', () => {
    render(<PageTemplate />);
    expect(screen.getByText('Titre de la Page Générique')).toBeInTheDocument();
  });
});

===== END tests/app/kreative/idea-incubator/my-ideas/page.test.tsx =====


===== BEGIN tests/routes-tests.spec.ts =====
'use client'

import { test } from '@playwright/test'
import fs from 'fs'
import path from 'path'

const routes: string[] = JSON.parse(fs.readFileSync('routes-tests.json', 'utf8'))
const outDir = path.join('playwright-report', 'index-test')
const NAV_TMO = Number(process.env.NAV_TMO ?? 45_000)
const toSafe = (s: string) => s.replace(/[^a-z0-9-_]+/gi, '_')

fs.mkdirSync(outDir, { recursive: true })

test.describe('Smoke pages index.test (collect errors)', () => {
  for (const r of routes) {
    test(`GET ${r}`, async ({ page }) => {
      page.setDefaultNavigationTimeout(NAV_TMO)
      let resp: any = null
      try {
        resp = await page.goto(`http://localhost:3000${r}`, { waitUntil: 'domcontentloaded', timeout: NAV_TMO })
      } catch {}

      const bodyText = await page.evaluate(() => document.body?.innerText || '')
      const modNotFound = bodyText.match(/Module not found:.*resolve.*\n?.*/i)?.[0] ?? null
      const buildErr = /Build Error/i.test(bodyText)
      const status = resp?.status?.()

      const base = toSafe(r)
      try { await page.screenshot({ path: path.join(outDir, `${base}.png`), fullPage: true }) } catch {}
      fs.writeFileSync(path.join(outDir, `${base}.html`), await page.content(), 'utf8')
      fs.appendFileSync(path.join(outDir, 'summary.ndjson'),
        JSON.stringify({ route: r, status, buildErr, modNotFound }) + '\n'
      )
    })
  }
})

===== END tests/routes-tests.spec.ts =====


===== BEGIN tests/routes.spec.ts =====
import { test, expect } from '@playwright/test'
import fs from 'fs'
import path from 'path'
import { normalizeError } from "../shared/errors";

const routes: string[] = JSON.parse(fs.readFileSync('routes.json', 'utf8'))
const GATE = process.env.SMOKE_GATE === '1'
const NAV_TMO = Number(process.env.NAV_TMO ?? 45_000)
const outDir = 'playwright-report'
const toSafe = (s: string) => s.replace(/[^a-z0-9-_]+/gi, '_')

test.describe('Smoke all pages', () => {
  for (const p of routes) {
    test(`GET ${p}`, async ({ page }) => {
      page.setDefaultTimeout(NAV_TMO)
      page.setDefaultNavigationTimeout(NAV_TMO)

      const logs: { type: string; text: string }[] = []
      page.on('console', m => logs.push({ type: m.type(), text: m.text() }))
      page.on('pageerror', e => logs.push({ type: 'pageerror', text: String(e) }))

      let resp: any = null
      let navErr: string | null = null
      try {
        resp = await page.goto(`http://localhost:3000${p}`, { waitUntil: 'domcontentloaded', timeout: NAV_TMO })
      } catch (e: any) {
        const { message, statusCode } = normalizeError(e);
        navErr = String(message ?? e)
      }
      const status = resp?.status()
      const ok = !!resp?.ok()

      const severe = logs.filter(l =>
        ['error', 'assert', 'pageerror'].includes(l.type) && !/favicon\.ico/i.test(l.text)
      )

      fs.mkdirSync(outDir, { recursive: true })
      if (navErr || !ok || severe.length) {
        const base = toSafe(p)
        try { await page.screenshot({ path: path.join(outDir, `smoke_${base}.png`), fullPage: true }) } catch {}
      }
      fs.appendFileSync(path.join(outDir, 'smoke.ndjson'),
        JSON.stringify({ path: p, status, ok, navErr, severe }) + '\n'
      )

      if (GATE) {
        expect(ok, `HTTP ${status} on ${p}`).toBeTruthy()
        expect(severe, `client errors on ${p}`).toHaveLength(0)
      }
    })
  }
})

===== END tests/routes.spec.ts =====

